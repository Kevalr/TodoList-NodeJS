<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TodoList</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <div class="todo-app-container">
      <!-- Todo List Header and task input form container-->
          <div class="task-create-form-container">
            <!-- Website Heading -->
            <div>
              <h1 class="app-heading">TODO App</h1>
              <hr>
            </div>
            
            <!-- Form for adding Tasks -->
            <form action="create-task" method="post">
                <div class="enter-task-name-container">
                <label for="">
                    DESCRIPTION
                </label>
                <BR />
                <input type='text' id='taskName-input' name='taskName' placeholder='What do you need to do?' required/>
                <hr>
                </div>
            
                <div class='enter-task-details-container'>
            
                <div class="select-task-category-container">
                    <label for="taskCategory">CATEGORY</label>
                    </br>
                    <select name="taskCategory" required id="task-category-input">
                    <option value="">Choose a category</option>
                    <option value="home">Home</option>
                    <option value="work">Work</option>
                    <option value="personal">Personal</option>
                    <option value="other">Other</option>
                    </select>
                </div>
                <div class="select-task-due-date-container">
                    <label for="">DUE DATE</label>
                    <br />
                    <input required type="date" name='taskDueDate' id='selete-task-due-date'>
                </div>
                </div>
                <hr>
                <div class="create-task-button-container">
                    
                <button type='submit' id='create-task-button'>+ ADD TASK </button>
                </div>
            </form>
          </div>
          <!-- Todolist Container -->
          <div id="todo-list-container">
            <% taskList.forEach((task) => {  %> 
            <div class="task-item <%= task.status%>">
              <div class="toggle-task-status-button-container">
                <form method="post" action="toggle-task-status?id=<%=task.
                _id%>">
                    <% if(task.status == 'completed') { %>
                    <input type='checkbox' name='taskStatus' value='completed' checked onChange="this.form.submit()" class='toggle-task-status-button' />
                    <% } else { %>
                     <input type='checkbox' name='taskStatus' value="pending" onChange="this.form.submit()" class='toggle-task-status-button' /> 
                     <% } %> 
                </form>
              </div>
        
              <div class="task-name-deadline-container">
                <p class='task-name'>
                  <%= task.taskName%>
                </p>
                <div class="task-deadline-container">
                  <p>cal : </p>
                  <p><%= task.dueDate%></p>
                  </p>
                </div>
              </div>
        
              <div class="task-category-tag-container">
                <div class='task-category-tag <%= task.category%>'>
                  <%= task.category%>
                </div>
              </div>
              <div class="task-delete-button-container">
                <a class='task-delete-button' id="task-delete-button" href="deletetask?id=<%=task.
                _id%>">
                <i class="fa fa-trash-o" style="font-size:24px;"></i>
                </a>
              </div>
            
          </div>

          <% })  %>
        </div>
</body>
</html>